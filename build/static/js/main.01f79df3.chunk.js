(this.webpackJsonpchurrasclogin=this.webpackJsonpchurrasclogin||[]).push([[0],{32:function(e,t,a){e.exports=a(62)},37:function(e,t,a){},38:function(e,t,a){e.exports=a.p+"static/media/LOGO1.e789692a.png"},62:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(28),o=a.n(r),l=(a(37),a(15)),s=a(1),i=a(12),m=a(3),u=a(8),d=Object(n.createContext)(),p=Object(n.createContext)(),f=Object(n.createContext)(),E=function(e){var t=Object(n.useState)({email:"",password:""}),r=Object(u.a)(t,2),o=r[0],l=r[1],s=o.email,E=o.password,b=Object(n.useContext)(p),g=b.alerta,O=b.mostrarAlerta,h=Object(n.useContext)(f),v=h.mensaje,j=h.autenticado,N=h.iniciarSesion,x=Object(n.useContext)(d).cargarSitios;Object(n.useEffect)((function(){j&&e.history.push("/sites"),v&&O(v.msg)}),[v,j,e.history]);var y=function(e){l(Object(m.a)(Object(m.a)({},o),{},Object(i.a)({},e.target.name,e.target.value)))};return c.a.createElement("div",{className:"container contenedor-login text-center text-light m-5"},g?c.a.createElement("p",{className:"alert alert-danger"},g.msg):c.a.createElement("div",{className:" primera-fila row d-flex flex-row justify-content-center"},c.a.createElement("div",{className:"col- "}),c.a.createElement("div",{className:"col- "},c.a.createElement("form",{className:"form-signin",onSubmit:function(e){e.preventDefault(),""!==s.trim()&&""!==E.trim()?(N({email:s,password:E}),x()):O("Churrascomplete todos los campos por favor")}},c.a.createElement("img",{className:"thumbnail mb-4",src:a(38),alt:"Logo Churrasco",height:"90vh"}),c.a.createElement("div",{className:"input-group mb-0"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text ",id:"basic-addon1"},c.a.createElement("i",{className:"material-icons"},"account_circle"))),c.a.createElement("label",{htmlFor:"email"}),c.a.createElement("input",{type:"email",className:"form-control",placeholder:"Username",id:"email",name:"email",value:s,onChange:y})),c.a.createElement("div",{className:"input-group mb-2"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text ",id:"basic-addon1"},c.a.createElement("i",{className:"material-icons"},"lock"))),c.a.createElement("label",{htmlFor:"password"}),c.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",id:"password",name:"password",value:E,onChange:y})),c.a.createElement("div",null,c.a.createElement("div",{className:"ml-2 float-left"},c.a.createElement("input",{className:"mr-2",type:"checkbox",value:""}),c.a.createElement("label",{className:"ml-0 text-muted leyenda"},"remember")),c.a.createElement("input",{type:"submit",className:"btn boton-login float-right font-weight-bold",value:"Log in"})))),c.a.createElement("div",{className:"col- "})),c.a.createElement("footer",{className:"segunda-fila row d-flex justify-content-center align-items-end text-center text-muted"},"web services under your control"))},b=function(){var e=Object(n.useContext)(f),t=e.autenticado,a=e.usuarioAutenticado,r=e.cerrarSesion,o=Object(n.useContext)(d).cargarSitios;return Object(n.useEffect)((function(){a(),t&&o()}),[]),c.a.createElement("header",{className:" encabezado navbar fixed-top d-flex justify-content-end "},c.a.createElement("a",{className:" m-2 badge font-weight-lighter text-light",href:"#!"},"Sites"),c.a.createElement("button",{className:" boton-logout badge font-weight-lighter text-light",onClick:function(){return r()}},"Logout"))},g=function(e){var t=e.site;return c.a.createElement("div",{className:"col-md-4 mb-3"},c.a.createElement("div",{className:"card text-left"},c.a.createElement("img",{className:"card-img-top",src:t.url_imagen,alt:"Imagen de ".concat(t.nombre)}),c.a.createElement("h6",{className:"card-header font-weight-bolder"},t.nombre),c.a.createElement("div",{className:"card-body"},c.a.createElement("p",{className:"text-truncate text-muted"},t.descripcion),c.a.createElement("a",{type:"button",href:"#!",className:"btn btn-block boton-login",onClick:function(){return window.open("https://www.google.com/maps/place/".concat(t.ubicacion._lat,"+").concat(t.ubicacion._long),"_blank")}},"Ver en Maps"))))},O=function(){var e=Object(n.useContext)(d).sites;return c.a.createElement(n.Fragment,null,e?c.a.createElement("div",{className:" listado-sitios row mt-5"},e.map((function(e){return c.a.createElement(g,{key:e.nombre,site:e})}))):null)},h=function(){var e=Object(n.useContext)(f),t=e.autenticado,a=e.usuarioAutenticado,r=Object(n.useContext)(d),o=r.sites,l=r.cargarSitios;return Object(n.useEffect)((function(){a(),t&&l()}),[t]),c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:" contenedor-sitios container text-center text-light d-flex justifiy-content-center align-items-center"},c.a.createElement("div",{className:"d-flex flex-column"},c.a.createElement(b,null),c.a.createElement("h2",{className:"d-flex justifiy-content-center align-items-center mb-4"}," ","Hey! Welcome to Churrasco Travel"," ",c.a.createElement("i",{className:"material-icons"},"directions_car"),c.a.createElement("i",{className:"material-icons"},"directions_boat"),c.a.createElement("i",{className:"material-icons"},"flight_takeoff")),c.a.createElement("h6",{className:"d-flex justifiy-content-center align-items-center mb-3"}," ","These are some of the destinations we can offer FOR FREE!"," "),c.a.createElement("p",{className:"text-muted d-flex justifiy-content-center align-items-center mb-0"},"DISCLAIMER: We only offer Google Maps based travels"," ",c.a.createElement("i",{className:"material-icons"}," language")),c.a.createElement("p",{className:"text-muted d-flex justifiy-content-center align-items-center mb-5"},"If you have any issues while travelling... it's Google's fault"," "),c.a.createElement("div",{className:"text-dark d-flex justifiy-content-center align-items-center"},o?c.a.createElement(O,null):null))))},v=function(e,t){switch(t.type){case"MOSTRAR_ALERTA":return{alerta:t.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},j=function(e){var t=Object(n.useReducer)(v,{alerta:null}),a=Object(u.a)(t,2),r=a[0],o=a[1];return c.a.createElement(p.Provider,{value:{alerta:r.alerta,mostrarAlerta:function(e){o({type:"MOSTRAR_ALERTA",payload:{msg:e}}),setTimeout((function(){o({type:"OCULTAR_ALERTA"})}),5e3)}}},e.children)},N=a(10),x=a.n(N),y=a(13),R=function(e,t){switch(t.type){case"LOGIN_EXITOSO":return localStorage.setItem("token",t.payload),Object(m.a)(Object(m.a)({},e),{},{autenticado:!0,mensaje:null});case"OBTENER_USUARIO":return Object(m.a)(Object(m.a)({},e),{},{autenticado:!0});case"CERRAR_SESION":case"LOGIN_ERROR":return localStorage.removeItem("token"),Object(m.a)(Object(m.a)({},e),{},{token:null,autenticado:null,mensaje:t.payload});default:return e}},S=a(29),w=a.n(S).a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL}),C=function(e){e?w.defaults.headers.common.Authorization="Bearer ".concat(e):delete w.defaults.headers.common.Authorization},_=function(e){var t={token:localStorage.getItem("token"),autenticado:null,mensaje:null},a=Object(n.useReducer)(R,t),r=Object(u.a)(a,2),o=r[0],l=r[1],s=Object(n.useContext)(d).cargarSitios,i=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.post("http://churrasco.uk.to:3005/api/auth",t);case 3:a=e.sent,l({type:"LOGIN_EXITOSO",payload:a.data}),m(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response),n={msg:e.t0.response.statusText},l({type:"LOGIN_ERROR",payload:n});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=localStorage.getItem("token");e?(C(e),s(),l({type:"OBTENER_USUARIO"})):l({type:"LOGIN_ERROR"})};return c.a.createElement(f.Provider,{value:{token:o.token,autenticado:o.autenticado,mensaje:o.mensaje,iniciarSesion:i,usuarioAutenticado:m,cerrarSesion:function(){l({type:"CERRAR_SESION"})}}},e.children)},A=function(e,t){switch(t.type){case"ACCESO_SITIOS":return Object(m.a)(Object(m.a)({},e),{},{sites:t.payload});case"ACCESO_ERROR":return Object(m.a)(Object(m.a)({},e),{},{mensaje:t.payload});default:return e}},k=function(e){var t=Object(n.useReducer)(A,{sites:null}),a=Object(u.a)(t,2),r=a[0],o=a[1],l=function(){var e=Object(y.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("http://churrasco.uk.to:3005/api/sites");case 3:t=e.sent,o({type:"ACCESO_SITIOS",payload:t.data.sites}),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),a={msg:e.t0.response},o({type:"ACCESO_ERROR",payload:a}),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(d.Provider,{value:{sites:r.sites,cargarSitios:l}},e.children)},I=a(31),T=function(e){var t=e.component,a=Object(I.a)(e,["component"]),r=Object(n.useContext)(f),o=r.autenticado,l=r.usuarioAutenticado;return Object(n.useEffect)((function(){l()}),[l]),c.a.createElement(s.b,Object.assign({},a,{render:function(e){return o?c.a.createElement(t,e):c.a.createElement(s.a,{to:"/"})}}))},L=localStorage.getItem("token");L&&C(L);var U=function(){return c.a.createElement(k,null,c.a.createElement(_,null,c.a.createElement(j,null,c.a.createElement(l.a,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:E}),c.a.createElement(T,{exact:!0,path:"/sites",component:h}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.01f79df3.chunk.js.map